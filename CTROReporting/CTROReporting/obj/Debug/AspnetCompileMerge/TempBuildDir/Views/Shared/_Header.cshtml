@using Microsoft.AspNet.Identity

@if (Request.IsAuthenticated)
{
    <a class="navbar-brand col-sm-3 text-light col-md-2 mr-0">CTRO Home</a>
    <input class="form-control form-control-dark w-100" type="text" placeholder="Search" aria-label="Search">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavDropdown">

        <ul class="navbar-nav px-3">
            <li class="dropdown">
                @*<span class="glyphicon glyphicon-user"></span>*@
                <a class="btn btn-info dropdown-toggle text-white" data-toggle="dropdown" aria-haspopup="true" id="dropdownMenuButton" aria-expanded="false">
                    @*<span class="glyphicon glyphicon-user"></span>*@
                    @{
                        var name = User.Identity.Name;
                        <text> @name </text>
                    }
                </a>

                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item" href='@Url.Action("UserProfile", "ApplicationUser", new { id = User.Identity.GetUserId()})'>
                        Profile
                    </a>
                    <a class="dropdown-item" href='@Url.Action("LogOff", "ApplicationUser")'>Sign Out</a>
                </div>
            </li>
        </ul>
    </div>
}


<script type="text/javascript">

    $(document).ready(function () {
        $(".nav-collapse .nav li a").click(function (e) {
            $(".nav-collapse .nav .active").removeClass("active");
            $(this).parent().addClass("active");
        });
    });

    $('#searchText').keypress(function (e) {
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code == 13 && $(this).val() != "") {
            $('#searchform').submit();
        }

    });
</script>
